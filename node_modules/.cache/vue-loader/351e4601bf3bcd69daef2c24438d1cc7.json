{"remainingRequest":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nacvelli/Documents/GitHub/officefinder-github.io/src/components/Recommendation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/src/components/Recommendation.vue","mtime":1597339026971},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IHsgQ0lUSUVTLCBXRUFUSEVSIH0gZnJvbSAnLi4vY29uc3RhbnRzLmpzJzsKCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdSZWNvbW1lbmRhdGlvbicsCiAgICAKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgd2VhdGhlclJlcG9ydDogJycsCiAgICAgICAgICAgIGZsaWdodENvc3Q6ICcnLAogICAgICAgICAgICByZWNvbW1lbmRlZENpdHk6IHt9CiAgICAgICAgfQogICAgfSwKCiAgICBjb21wdXRlZDogewogICAgICAgIC4uLm1hcFN0YXRlKFsndXNlcldlYXRoZXJTZWxlY3Rpb24nLCAnaXNDaGVhcEZsaWdodENvc3RFbmFibGVkJywgJ2NpdHlXZWF0aGVyJywgJ2NpdHlGbGlnaHRDb3N0J10pLAoKICAgICAgICBpc1JlY29tbWVuZGVkT2ZmaWNlQXZhaWxhYmxlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yZWNvbW1lbmRlZENpdHkgJiYgT2JqZWN0LmtleXModGhpcy5yZWNvbW1lbmRlZENpdHkpLmxlbmd0aCA+IDA7CiAgICAgICAgfSwKCiAgICAgICAgY2l0eUNsYXNzTmFtZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNSZWNvbW1lbmRlZE9mZmljZUF2YWlsYWJsZSA/IHRoaXMucmVjb21tZW5kZWRDaXR5Lm5hbWUudG9Mb3dlckNhc2UoKSA6ICcnOwogICAgICAgIH0sCgogICAgICAgIGNoZWFwRmxpZ2h0Q29zdCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNSZWNvbW1lbmRlZE9mZmljZUF2YWlsYWJsZSA/IHRoaXMucmVjb21tZW5kZWRDaXR5LmZsaWdodENvc3QgOiAnJzsKICAgICAgICB9CiAgICB9LAoKICAgIG1vdW50ZWQoKSB7CiAgICAgICAgdGhpcy5maW5kUmVjb21tZW5kZWRMb2NhdGlvbigpOwogICAgfSwKCiAgICBtZXRob2RzOiB7CiAgICAgICAgZmluZFJlY29tbWVuZGVkTG9jYXRpb24oKSB7CiAgICAgICAgICAgIGxldCByZWNvbW1lZGVkQ2l0aWVzID0gW107CiAgICAgICAgICAgIGNvbnN0IGNpdHlXZWF0aGVyVHJhdmVsUHJlZmVyZW5jZSA9IHRoaXMuZGVlcEZsYXR0ZW5EYXRhKCk7CgogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnVzZXJXZWF0aGVyU2VsZWN0aW9uKSAmJiB0aGlzLnVzZXJXZWF0aGVyU2VsZWN0aW9uLmxlbmd0aCAmJgogICAgICAgICAgICAgICAgQXJyYXkuaXNBcnJheSh0aGlzLmNpdHlXZWF0aGVyKSAmJiB0aGlzLmNpdHlXZWF0aGVyLmxlbmd0aCkgewogICAgICAgICAgICAgICAgbGV0IHVzZXJNaW5UZW1wZXJhdHVyZTsKICAgICAgICAgICAgICAgIGxldCB1c2VyTWF4VGVtcGVyYXR1cmU7CiAgICAgICAgICAgICAgICBjb25zdCB1c2VyV2VhdGhlckxpc3QgPSB0aGlzLmdldFVzZXJXZWF0aGVyTGlzdCh0aGlzLnVzZXJXZWF0aGVyU2VsZWN0aW9uKTsKCiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh1c2VyV2VhdGhlckxpc3QpICYmIHVzZXJXZWF0aGVyTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXJXZWF0aGVyTGlzdC5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pblRlbXBMaXN0ID0gdXNlcldlYXRoZXJMaXN0Lm1hcCgoeyBtaW4gfSkgPT4gbWluKTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF4VGVtcExpc3QgPSB1c2VyV2VhdGhlckxpc3QubWFwKCh7IG1heCB9KSA9PiBtYXgpOwogICAgICAgICAgICAgICAgICAgICAgICB1c2VyTWluVGVtcGVyYXR1cmUgPSBNYXRoLm1pbi5hcHBseShNYXRoLCBtaW5UZW1wTGlzdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJNYXhUZW1wZXJhdHVyZSA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIG1heFRlbXBMaXN0KTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB1c2VyTWluVGVtcGVyYXR1cmUgPSB1c2VyV2VhdGhlckxpc3QgJiYgdXNlcldlYXRoZXJMaXN0WzBdLm1pbjsKICAgICAgICAgICAgICAgICAgICAgICAgdXNlck1heFRlbXBlcmF0dXJlID0gdXNlcldlYXRoZXJMaXN0ICYmIHVzZXJXZWF0aGVyTGlzdFswXS5tYXg7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNpdHlXZWF0aGVyVHJhdmVsUHJlZmVyZW5jZS5tYXAoaSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGkud2VhdGhlci5NaW5pbXVtLlZhbHVlID49IHVzZXJNaW5UZW1wZXJhdHVyZSAmJiBpLndlYXRoZXIuTWF4aW11bS5WYWx1ZSA8PSB1c2VyTWF4VGVtcGVyYXR1cmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29tbWVkZWRDaXRpZXMucHVzaChpKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodGhpcy5pc0NoZWFwRmxpZ2h0Q29zdEVuYWJsZWQgJiYgQXJyYXkuaXNBcnJheSh0aGlzLmNpdHlGbGlnaHRDb3N0KSAmJiB0aGlzLmNpdHlGbGlnaHRDb3N0Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgaWYgKCFyZWNvbW1lZGVkQ2l0aWVzLmxlbmd0aCkgeyAKICAgICAgICAgICAgICAgICAgICByZWNvbW1lZGVkQ2l0aWVzID0gY2l0eVdlYXRoZXJUcmF2ZWxQcmVmZXJlbmNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJlY29tbWVkZWRDaXRpZXMuc29ydChmdW5jdGlvbihhLCBiKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEuZmxpZ2h0Q29zdCAtIGIuZmxpZ2h0Q29zdDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZWNvbW1lZGVkQ2l0aWVzKSAmJiByZWNvbW1lZGVkQ2l0aWVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgdGhpcy5yZWNvbW1lbmRlZENpdHkgPSByZWNvbW1lZGVkQ2l0aWVzWzBdOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgZGVlcEZsYXR0ZW5EYXRhKCkgewogICAgICAgICAgICBsZXQgY2l0eVdlYXRoZXJUcmF2ZWxMaXN0ID0gW107CgogICAgICAgICAgICBDSVRJRVMuZm9yRWFjaCgoaSk9PiB7CiAgICAgICAgICAgICAgICBsZXQgY2l0eU9iaiA9IHt9OwoKICAgICAgICAgICAgICAgIGNpdHlPYmoubmFtZSA9IGkuY2l0eTsKICAgICAgICAgICAgICAgIHRoaXMuY2l0eVdlYXRoZXIuZm9yRWFjaCgobykgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChvLmNpdHkgPT09IGkuYWlycG9ydENvZGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2l0eU9iai53ZWF0aGVyID0gby50ZW1wZXJhdHVyZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICB0aGlzLmNpdHlGbGlnaHRDb3N0LmZvckVhY2goKGYpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoZi5jaXR5ID09PSBpLmFpcnBvcnRDb2RlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNpdHlPYmouZmxpZ2h0Q29zdCA9IGYucHJpY2VGcm9tOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNpdHlXZWF0aGVyVHJhdmVsTGlzdC5wdXNoKGNpdHlPYmopOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJldHVybiBjaXR5V2VhdGhlclRyYXZlbExpc3Q7CiAgICAgICAgfSwKCiAgICAgICAgZ2V0VXNlcldlYXRoZXJMaXN0KHNlbGVjdGlvbkxpc3QpIHsKICAgICAgICAgICAgbGV0IHRlbXBlcmF0dXJlTGlzdCA9IFtdOwogICAgICAgICAgICBzZWxlY3Rpb25MaXN0LmZvckVhY2goKHNlbGVjdGVkSXRlbSk9PiB7CiAgICAgICAgICAgICAgICBXRUFUSEVSLmNvbmRpdGlvbnMuZm9yRWFjaCgod2VhdGhlckl0ZW0pPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEl0ZW0gPT09IHdlYXRoZXJJdGVtLnZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlTGlzdC5wdXNoKHdlYXRoZXJJdGVtLnRlbXBlcmF0dXJlKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJldHVybiB0ZW1wZXJhdHVyZUxpc3Q7CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["Recommendation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Recommendation.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"result-container\">\n        <div v-if=\"isRecommendedOfficeAvailable\" v-bind:class=\"[isRecommendedOfficeAvailable ? cityClassName : '', 'recommeded-location']\">\n            <div class=\"result-content\">\n                <span class=\"recommend-text\">We recommend</span>\n                <h1>{{ this.recommendedCity.name }}</h1>\n                <div class=\"current-weather\">\n                    <img alt=\"logo\" src=\"../assets/weather.png\" />\n                    <span class=\"min\">{{ Math.round(this.recommendedCity.weather.Minimum.Value) }}</span>\n                    <span>-</span>\n                    <span class=\"max\">{{ Math.round(this.recommendedCity.weather.Maximum.Value) }}</span>\n                </div>\n                <div v-if=\"isCheapFlightCostEnabled && cheapFlightCost\" class=\"price\">Price from <span>&euro;{{ cheapFlightCost }}</span></div>\n                <div class=\"reset\"><router-link to=\"/\">Start Over</router-link></div>\n            </div>\n        </div>\n        <div v-else class=\"no-office\">\n            <h1>Sorry! No office location is suitable for your preference!</h1>\n            <router-link to=\"/\">Start Over</router-link>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { CITIES, WEATHER } from '../constants.js';\n\nexport default {\n    name: 'Recommendation',\n    \n    data() {\n        return {\n            weatherReport: '',\n            flightCost: '',\n            recommendedCity: {}\n        }\n    },\n\n    computed: {\n        ...mapState(['userWeatherSelection', 'isCheapFlightCostEnabled', 'cityWeather', 'cityFlightCost']),\n\n        isRecommendedOfficeAvailable() {\n            return this.recommendedCity && Object.keys(this.recommendedCity).length > 0;\n        },\n\n        cityClassName() {\n            return this.isRecommendedOfficeAvailable ? this.recommendedCity.name.toLowerCase() : '';\n        },\n\n        cheapFlightCost() {\n            return this.isRecommendedOfficeAvailable ? this.recommendedCity.flightCost : '';\n        }\n    },\n\n    mounted() {\n        this.findRecommendedLocation();\n    },\n\n    methods: {\n        findRecommendedLocation() {\n            let recommededCities = [];\n            const cityWeatherTravelPreference = this.deepFlattenData();\n\n            if (Array.isArray(this.userWeatherSelection) && this.userWeatherSelection.length &&\n                Array.isArray(this.cityWeather) && this.cityWeather.length) {\n                let userMinTemperature;\n                let userMaxTemperature;\n                const userWeatherList = this.getUserWeatherList(this.userWeatherSelection);\n\n                if (Array.isArray(userWeatherList) && userWeatherList.length > 0) {\n                    if (userWeatherList.length > 1) {\n                        const minTempList = userWeatherList.map(({ min }) => min);\n                        const maxTempList = userWeatherList.map(({ max }) => max);\n                        userMinTemperature = Math.min.apply(Math, minTempList);\n                        userMaxTemperature = Math.max.apply(Math, maxTempList);\n                    } else {\n                        userMinTemperature = userWeatherList && userWeatherList[0].min;\n                        userMaxTemperature = userWeatherList && userWeatherList[0].max;\n                    }\n                    \n                    cityWeatherTravelPreference.map(i => {\n                        if(i.weather.Minimum.Value >= userMinTemperature && i.weather.Maximum.Value <= userMaxTemperature) {\n                            recommededCities.push(i);\n                        }\n                    });\n                }\n            }\n\n            if (this.isCheapFlightCostEnabled && Array.isArray(this.cityFlightCost) && this.cityFlightCost.length) {\n                if (!recommededCities.length) { \n                    recommededCities = cityWeatherTravelPreference;\n                }\n\n                recommededCities.sort(function(a, b) {\n                    return a.flightCost - b.flightCost;\n                });\n            }\n\n            if (Array.isArray(recommededCities) && recommededCities.length) {\n                this.recommendedCity = recommededCities[0];\n            }\n        },\n\n        deepFlattenData() {\n            let cityWeatherTravelList = [];\n\n            CITIES.forEach((i)=> {\n                let cityObj = {};\n\n                cityObj.name = i.city;\n                this.cityWeather.forEach((o) => {\n                    if (o.city === i.airportCode) {\n                        cityObj.weather = o.temperature;\n                    }\n                });\n\n                this.cityFlightCost.forEach((f) => {\n                    if (f.city === i.airportCode) {\n                        cityObj.flightCost = f.priceFrom;\n                    }\n                });\n\n                cityWeatherTravelList.push(cityObj);\n            });\n\n            return cityWeatherTravelList;\n        },\n\n        getUserWeatherList(selectionList) {\n            let temperatureList = [];\n            selectionList.forEach((selectedItem)=> {\n                WEATHER.conditions.forEach((weatherItem)=> {\n                    if (selectedItem === weatherItem.value) {\n                        temperatureList.push(weatherItem.temperature);\n                    }\n                })\n            });\n\n            return temperatureList;\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\">\n    .result-container {\n        width: 100%;\n        height: 100%;\n        display: flex;\n        box-sizing: border-box;\n\n        .recommeded-location {\n            width: 100%;\n            height: 100%;\n            display: flex;\n            box-sizing: border-box;\n            color: #ffffff;\n            background-color: #000000;\n\n            .result-content {\n                padding: 20px 50px;\n                text-align: left;\n\n                .recommend-text {\n                    padding-left: 5px;\n                }\n\n                h1 {\n                    font-size: 50px;\n                    margin: 0;\n                }\n\n                .current-weather {\n                    display: inline-block;\n\n                    img {\n                        width: 50px;\n                        margin-right: 15px;\n                    }\n\n                    span {\n                        float: right;\n                        padding: 0 5px;\n                        font-size: 26px;\n                        font-weight: 700;\n                        position: relative;\n                        top: 7px;\n                    }\n\n                    span.min::after,\n                    span.max::after {\n                        content: \"\\00b0\"\n                    }\n                }\n\n                .price {\n                    font-size: 16px;\n                    padding: 10px 20px;\n\n                    span {\n                        font-size: 26px;\n                        font-weight: 700;\n                        padding: 0 5px;\n                    }\n                }\n\n                .reset {\n                    display: flex;\n                    margin: 10px;\n\n                    a {\n                        font-size: 16px;\n                        font-weight: 700;\n                        color: #fff;\n                        border: 1px solid #34495E;\n                        border-radius: 4px;\n                        text-decoration: none;\n                        padding: 10px 20px;\n                        cursor: pointer;\n                        background: #300000;\n                        background: linear-gradient(45deg, #300000, #000000, #300000, #000000);\n                    }\n                }\n            }\n        }\n\n        .no-office {\n            width: 100%;\n            height: 100%;\n            text-align: center;\n            background-color: #ffffff;\n            color: #000000;\n        }\n\n        .amsterdam {\n            background-image: url(\"../assets/amsterdam.jpg\");\n            background-size: cover;\n            \n        }\n\n        .budapest {\n            background-image: url(\"../assets/budapest.jpg\");\n            background-size: cover;\n        }\n        \n        .madrid {\n            background-image: url(\"../assets/madrid.jpg\");\n            background-size: cover;\n        }\n    }\n</style>"]}]}
{"remainingRequest":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nacvelli/Documents/GitHub/officefinder-github.io/src/components/TravelCost.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/src/components/TravelCost.vue","mtime":1597338838529},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlLCBtYXBNdXRhdGlvbnMgfSBmcm9tICd2dWV4JwppbXBvcnQgeyBDSVRJRVMgfSBmcm9tICcuLi9jb25zdGFudHMuanMnOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ1RyYXZlbENvc3QnLAoKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgY2hlYXBUcmF2ZWxDb3N0OiAnJwogICAgICAgIH0KICAgIH0sCgogICAgY29tcHV0ZWQ6IHsKICAgICAgICAuLi5tYXBTdGF0ZShbJ3VzZXInXSkKICAgIH0sCgogICAgbWV0aG9kczogewogICAgICAgIC4uLm1hcE11dGF0aW9ucyAoWyJzZXRGbGlnaHRDb3N0IiwgInNldENoZWFwRmxpZ2h0Q29zdEZsYWciXSksCgogICAgICAgIHN1Ym1pdFByZWZlcmVuY2UoZSkgewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcmVjb21tZW5kYXRpb24nKTsKICAgICAgICB9LAoKICAgICAgICB1cGRhdGVUcmF2ZWxQcmVmZXJlbmNlKHRyYXZlbENvc3RTdGF0dXMpIHsKICAgICAgICAgICAgaWYgKHRyYXZlbENvc3RTdGF0dXMpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGhvbWVPZmZpY2VDb2RlID0gJ0NERyc7IC8vIEhvbWUgTG9jYXRpb24gQWlycG9ydCBDb2RlCiAgICAgICAgICAgICAgICBjb25zdCBvdGhlck9mZmljZURhdGEgPSBDSVRJRVMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5jaXR5ICE9PSB0aGlzLnVzZXIuaG9tZUxvY2F0aW9uKTsKICAgICAgICAgICAgICAgIGNvbnN0IG90aGVyb2ZmaWNlQ29kZXMgPSBvdGhlck9mZmljZURhdGEubWFwKG8gPT4gby5haXJwb3J0Q29kZSk7CgogICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVhcEZsaWdodENvc3RGbGFnKHRyYXZlbENvc3RTdGF0dXMpOwoKICAgICAgICAgICAgICAgIG90aGVyb2ZmaWNlQ29kZXMuZm9yRWFjaCgocmVjb21tZW5kZWRPZmZpY2VDb2RlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVDaGVhcEZsaWdodENvc3QoaG9tZU9mZmljZUNvZGUsIHJlY29tbWVuZGVkT2ZmaWNlQ29kZSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5zZXRDaGVhcEZsaWdodENvc3RGbGFnKHRyYXZlbENvc3RTdGF0dXMpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgYXN5bmMgY2FsY3VsYXRlQ2hlYXBGbGlnaHRDb3N0KGZseUZyb20sIGZseVRvKSB7CiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLnNreXBpY2tlci5jb20vZmxpZ2h0cz9mbHlfZnJvbT0ke2ZseUZyb219JmZseV90bz0ke2ZseVRvfSZwYXJ0bmVyPXBpY2t5JnNvcnQ9cHJpY2UmbGltaXQ9MTBgKQogICAgICAgICAgICBjb25zdCBmbGlnaHREYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwogICAgICAgICAgICBjb25zdCByZXNwb25zZURhdGEgPSBmbGlnaHREYXRhLmRhdGE7CiAgICAgICAgICAgIGNvbnN0IHByaWNlU3RhcnRpbmdGcm9tID0gTWF0aC5taW4uYXBwbHkobnVsbCwgcmVzcG9uc2VEYXRhLm1hcCggeCA9PiB4LnByaWNlKSk7CiAgICAgICAgICAgIHRoaXMuc2V0Q2hlYXBGbGlnaHRDb3N0KGZseVRvLCBwcmljZVN0YXJ0aW5nRnJvbSk7CiAgICAgICAgfSwKCiAgICAgICAgc2V0Q2hlYXBGbGlnaHRDb3N0KGZseVRvLCBwcmljZSkgewogICAgICAgICAgICB0aGlzLnNldEZsaWdodENvc3QoewogICAgICAgICAgICAgICAgY2l0eTogZmx5VG8sCiAgICAgICAgICAgICAgICBwcmljZUZyb206IHByaWNlCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KCn0K"},{"version":3,"sources":["TravelCost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"TravelCost.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"travel-preference\">\n        <form @submit=\"submitPreference\">\n            <div class=\"travel\">\n                <img alt=\"logo\" src=\"../assets/flight.png\" />\n                <h1>Do you want a cheap flight cost?</h1>\n                <div class=\"description\">Your flight depart from home location ({{ this.user.homeLocation }})</div>\n                <ul>\n                    <li>\n                        <input type=\"radio\" id=\"economy\" value=\"true\" v-model=\"cheapTravelCost\" @change=\"updateTravelPreference(true)\" />\n                        <label for=\"economy\">Yes</label>\n                    </li>\n                    <li>\n                        <input type=\"radio\" id=\"business\" value=\"false\" v-model=\"cheapTravelCost\" @change=\"updateTravelPreference(false)\" />\n                        <label for=\"business\">No</label>\n                    </li>\n                </ul>\n            </div>\n            <button type=\"submit\">See Results</button>\n        </form>\n    </div>\n</template>\n\n<script>\nimport { mapState, mapMutations } from 'vuex'\nimport { CITIES } from '../constants.js';\n\nexport default {\n    name: 'TravelCost',\n\n    data() {\n        return {\n            cheapTravelCost: ''\n        }\n    },\n\n    computed: {\n        ...mapState(['user'])\n    },\n\n    methods: {\n        ...mapMutations ([\"setFlightCost\", \"setCheapFlightCostFlag\"]),\n\n        submitPreference(e) {\n            e.preventDefault();\n            this.$router.push('/recommendation');\n        },\n\n        updateTravelPreference(travelCostStatus) {\n            if (travelCostStatus) {\n                const homeOfficeCode = 'CDG'; // Home Location Airport Code\n                const otherOfficeData = CITIES.filter(item => item.city !== this.user.homeLocation);\n                const otherofficeCodes = otherOfficeData.map(o => o.airportCode);\n\n                this.setCheapFlightCostFlag(travelCostStatus);\n\n                otherofficeCodes.forEach((recommendedOfficeCode) => {\n                    this.calculateCheapFlightCost(homeOfficeCode, recommendedOfficeCode);\n                })\n            } else {\n                this.setCheapFlightCostFlag(travelCostStatus);\n            }\n        },\n\n        async calculateCheapFlightCost(flyFrom, flyTo) {\n            const response = await fetch(`https://api.skypicker.com/flights?fly_from=${flyFrom}&fly_to=${flyTo}&partner=picky&sort=price&limit=10`)\n            const flightData = await response.json();\n            const responseData = flightData.data;\n            const priceStartingFrom = Math.min.apply(null, responseData.map( x => x.price));\n            this.setCheapFlightCost(flyTo, priceStartingFrom);\n        },\n\n        setCheapFlightCost(flyTo, price) {\n            this.setFlightCost({\n                city: flyTo,\n                priceFrom: price\n            });\n        }\n    }\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n    .travel-preference {\n        width: 100%;\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        box-sizing: border-box;\n\n        img {\n            width: 150px;\n            margin: 0 auto;\n        }\n\n        h1 {\n            margin: 20px 0;\n        }\n\n        .description {\n            padding: 5px 0;\n        }\n\n        ul {\n            li {\n                input[type=\"radio\"][id=\"economy\"],\n                input[type=\"radio\"][id=\"business\"] {\n                    display: none;\n                }\n\n                label {\n                    font-size: 20px;\n                    font-weight: 700;\n                    border: 1px solid #34495E;\n                    border-radius: 4px;\n                    padding: 15px 50px;\n                    margin: 10px 30px;\n                }\n            }\n        }\n    }\n</style>"]}]}
{"remainingRequest":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nacvelli/Documents/GitHub/officefinder-github.io/src/components/TravelCost.vue?vue&type=style&index=0&id=afbf7692&lang=scss&scoped=true&","dependencies":[{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/src/components/TravelCost.vue","mtime":1600313895786},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/nacvelli/Documents/GitHub/officefinder-github.io/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoudHJhdmVsLXByZWZlcmVuY2UgewogICAgd2lkdGg6IDEwMCU7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBkaXNwbGF5OiBmbGV4OwogICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CgogICAgaW1nIHsKICAgICAgICB3aWR0aDogMTUwcHg7CiAgICAgICAgbWFyZ2luOiAwIGF1dG87CiAgICB9CgogICAgaDEgewogICAgICAgIG1hcmdpbjogMjBweCAwOwogICAgfQoKICAgIC5kZXNjcmlwdGlvbiB7CiAgICAgICAgcGFkZGluZzogNXB4IDA7CiAgICB9CgogICAgdWwgewogICAgICAgIGxpIHsKICAgICAgICAgICAgaW5wdXRbdHlwZT0icmFkaW8iXVtpZD0iZWNvbm9teSJdLAogICAgICAgICAgICBpbnB1dFt0eXBlPSJyYWRpbyJdW2lkPSJidXNpbmVzcyJdIHsKICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxhYmVsIHsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMjBweDsKICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7CiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjMzQ0OTVFOwogICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OwogICAgICAgICAgICAgICAgcGFkZGluZzogMTVweCA1MHB4OwogICAgICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDMwcHg7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["TravelCost.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TravelCost.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"travel-preference\">\n        <form @submit=\"submitPreference\">\n            <div class=\"travel\">\n                <img alt=\"logo\" src=\"../assets/flight.png\" />\n                <h1>Do you want a cheap flight cost?</h1>\n                <div class=\"description\">Your flight depart from home location ({{ this.user.homeLocation }})</div>\n                <ul>\n                    <li>\n                        <input type=\"radio\" id=\"economy\" value=\"true\" v-model=\"cheapTravelCost\" @change=\"updateTravelPreference(true)\" />\n                        <label for=\"economy\">Yes</label>\n                    </li>\n                    <li>\n                        <input type=\"radio\" id=\"business\" value=\"false\" v-model=\"cheapTravelCost\" @change=\"updateTravelPreference(false)\" />\n                        <label for=\"business\">No</label>\n                    </li>\n                </ul>\n            </div>\n            <button type=\"submit\">See Results</button>\n        </form>\n    </div>\n</template>\n\n<script>\nimport { mapState, mapMutations } from 'vuex'\nimport { CITIES } from '../constants.js';\n\nexport default {\n    name: 'TravelCost',\n\n    data() {\n        return {\n            cheapTravelCost: ''\n        }\n    },\n\n    computed: {\n        ...mapState(['user'])\n    },\n\n    methods: {\n        ...mapMutations (['setFlightCost', 'setCheapFlightCostFlag']),\n\n        submitPreference(e) {\n            e.preventDefault();\n            this.$router.push('/recommendation');\n        },\n\n        updateTravelPreference(travelCostStatus) {\n            if (travelCostStatus) {\n                const homeOfficeCode = 'CDG'; // Home Location Airport Code\n                const otherOfficeData = CITIES.filter(item => item.city !== this.user.homeLocation);\n                const otherofficeCodes = otherOfficeData.map(o => o.airportCode);\n\n                this.setCheapFlightCostFlag(travelCostStatus);\n\n                otherofficeCodes.forEach((recommendedOfficeCode) => {\n                    this.calculateCheapFlightCost(homeOfficeCode, recommendedOfficeCode);\n                })\n            } else {\n                this.setCheapFlightCostFlag(travelCostStatus);\n            }\n        },\n\n        async calculateCheapFlightCost(flyFrom, flyTo) {\n            const response = await fetch(`https://api.skypicker.com/flights?fly_from=${flyFrom}&fly_to=${flyTo}&partner=picky&sort=price&limit=10`)\n            const flightData = await response.json();\n            const responseData = flightData.data;\n            const priceList = responseData.map(x => x.price);\n            const priceStartingFrom = Math.min(...priceList)\n\n            this.setCheapFlightCost(flyTo, priceStartingFrom);\n        },\n\n        setCheapFlightCost(flyTo, price) {\n            this.setFlightCost({\n                city: flyTo,\n                priceFrom: price\n            });\n        }\n    }\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n    .travel-preference {\n        width: 100%;\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        box-sizing: border-box;\n\n        img {\n            width: 150px;\n            margin: 0 auto;\n        }\n\n        h1 {\n            margin: 20px 0;\n        }\n\n        .description {\n            padding: 5px 0;\n        }\n\n        ul {\n            li {\n                input[type=\"radio\"][id=\"economy\"],\n                input[type=\"radio\"][id=\"business\"] {\n                    display: none;\n                }\n\n                label {\n                    font-size: 20px;\n                    font-weight: 700;\n                    border: 1px solid #34495E;\n                    border-radius: 4px;\n                    padding: 15px 50px;\n                    margin: 10px 30px;\n                }\n            }\n        }\n    }\n</style>"]}]}